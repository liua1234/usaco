/*
ID: liu_a123
PROG: transform
LANG: C++11
*/ 


#include <iostream>
#include <cstdio>
using namespace std;
int i,j,n,temp,m[11][11];;;
char a[10+5][10+5],b[10+5][10+5],c[10+5][10+5];
bool ok=1;
void xz(int z)
{
	if(z==1)
	{
	    
	   	for(i=0;i<n;i++)
	   	{
			for(j=0;j<n;j++)
			{
				m[j][n-i-1]=a[i][j];
			}
		}
	    for(i=0;i<n;i++)
	    {  
			for(j=0;j<n;j++)
			{
				a[i][j]=m[i][j];
			}        
		}
             
	}
	if(z==2)
	{
		for(i=0;i<n;i++)
		{
			for(j=0;j<n/2;j++)
			{
	          	temp=a[i][j];
	            a[i][j]=a[i][n-j-1];
	            a[i][n-j-1]=temp;
        	}
		}
        
	}
	if(z==3)
	{
		return;
	}
	if(z==4)
	{
		for(i=0;i<n;i++)
		{
			for(j=0;j<n/2;j++)
			{
	          	temp=a[i][j];
	            a[i][j]=a[i][n-j-1];
	            a[i][n-j-1]=temp;
        	}
		}
		
   	  	for(i=0;i<n;i++)
	   	{
			for(j=0;j<n;j++)
			{
				m[j][n-i-1]=a[i][j];
			}
		}
	    for(i=0;i<n;i++)
	    {  
			for(j=0;j<n;j++)
			{
				a[i][j]=m[i][j];
			}        
		}
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]!=b[i][j])
				{
					ok=false;
					break;
				}
			}
		}
		if(ok)
		{
			return;
		}
		ok=1;
   	  	for(i=0;i<n;i++)
	   	{
			for(j=0;j<n;j++)
			{
				m[j][n-i-1]=a[i][j];
			}
		}
	    for(i=0;i<n;i++)
	    {  
			for(j=0;j<n;j++)
			{
				a[i][j]=m[i][j];
			}        
		}
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]!=b[i][j])
				{
					ok=false;
					break;
				}
			}
		}
		if(ok)
		{
			return;
		}
		ok=1;
   	  	for(i=0;i<n;i++)
	   	{
			for(j=0;j<n;j++)
			{
				m[j][n-i-1]=a[i][j];
			}
		}
	    for(i=0;i<n;i++)
	    {  
			for(j=0;j<n;j++)
			{
				a[i][j]=m[i][j];
			}        
		}
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]!=b[i][j])
				{
					ok=false;
					break;
				}
			}
		}
		if(ok)
		{
			return;
		}
	}

}
int main()
{
	freopen("transform.in","r",stdin);
	freopen("transform.out","w",stdout);
	cin>>n;
	for(i=0;i<n;i++)
	{
		for(j=0;j<n;j++)
		{
			cin>>a[i][j];
		}
	}
	for(i=0;i<n;i++)
	{
		for(j=0;j<n;j++)
		{
			c[i][j]=a[i][j];
		}
	}
	
	for(i=0;i<n;i++)
	{
		for(j=0;j<n;j++)
		{
			cin>>b[i][j];
		}
	}
	for(int k=1;k<=6;k++)
	{
		if(k<=3)
		{
			xz(1);
			ok=true;
		}
		if(k==4)
		{
			for(i=0;i<n;i++)
			{
				for(j=0;j<n;j++)
				{
					a[i][j]=c[i][j];
				}
			}
			xz(2);
			ok=1;
		}
		if(k==5)
		{
			for(i=0;i<n;i++)
			{
				for(j=0;j<n;j++)
				{
					a[i][j]=c[i][j];
				}
			}
			xz(4);
			ok=1;
		}
		if(k==6)
		{
			xz(3);
			ok=1;
		}
		for(i=0;i<n;i++)
		{
			for(j=0;j<n;j++)
			{
				if(a[i][j]!=b[i][j])
				{
					ok=false;
					break;
				}
			}
		}
		if(ok)
		{
			cout<<k<<endl;
			return 0;
		}
		ok=1;
	}
	cout<<"7"<<endl;
}
